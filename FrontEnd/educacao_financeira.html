<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIA - Educa√ß√£o Financeira</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header class="header">
        <img src="images/lia.png" alt="Logo LIA" class="logo">
        <nav class="nav">
            <button class="nav-button" onclick="window.location.href='dashboard.html'">Voltar ao Dashboard</button>
        </nav>
    </header>

    <main class="main-content">
        <h1>üìò Educa√ß√£o Financeira</h1>
        <p>Antes de come√ßarmos, responda o quiz abaixo para descobrir seu n√≠vel de conhecimento:</p>

        <!-- Quiz -->
        <section class="finance-section quiz-section">
            <h2>üß† Quiz Inicial</h2>
            <div id="quiz-area" class="quiz-area"></div>
        </section>

        <!-- Resultado -->
        <section class="finance-section" id="resultado-section" style="display: none;">
            <h2>üìä Resultado do Quiz</h2>
            <p id="mensagem-resultado"></p>
        </section>

        <!-- Conceitos -->
        <section class="finance-section" id="conceitos-basicos" style="display: none;">
            <h2>üîç Conceitos B√°sicos</h2>
            <ul class="list">
                <li><strong>Juros Compostos:</strong> O poder dos juros sobre juros ao longo do tempo.</li>
                <li><strong>Or√ßamento Pessoal:</strong> Como planejar seus gastos e economias.</li>
                <li><strong>Infla√ß√£o:</strong> Entenda como a infla√ß√£o afeta seu poder de compra.</li>
                <li><strong>Reserva de Emerg√™ncia:</strong> Import√¢ncia de ter uma reserva financeira.</li>
            </ul>
        </section>

        <section class="finance-section" id="conceitos-avancados" style="display: none;">
            <h2>üìà Conceitos Avan√ßados</h2>
            <ul class="list">
                <li><strong>Renda Fixa vs. Renda Vari√°vel:</strong> Diferen√ßas e aplica√ß√µes pr√°ticas.</li>
                <li><strong>Portf√≥lio de Investimentos:</strong> Como diversificar para minimizar riscos.</li>
                <li><strong>An√°lise Fundamentalista:</strong> Entenda como avaliar empresas na bolsa.</li>
                <li><strong>Planejamento Tribut√°rio:</strong> Estrat√©gias para otimizar impostos.</li>
            </ul>
        </section>
    </main>

    <button class="floating-button" onclick="window.location.href='chat.html'">üí¨ Fale com o LIA</button>

    <footer class="footer">
        <p>&copy; 2025 LIA - Assistente Financeiro. Todos os direitos reservados.</p>
    </footer>

    <script>
        let perguntas = [];
        let index = 0;
        let acertos = 0;

        async function carregarQuiz() {
            try {
                const res = await fetch('http://127.0.0.1:5000/quiz');
                perguntas = await res.json();
                mostrarPergunta();
            } catch (err) {
                document.getElementById('quiz-area').innerHTML = "<p>‚ùå Erro ao carregar o quiz. Verifique se a API est√° ativa.</p>";
                console.error(err);
            }
        }

        function mostrarPergunta() {
            const quizArea = document.getElementById('quiz-area');
            if (index < perguntas.length) {
                const p = perguntas[index];
                quizArea.innerHTML = `
                    <p><strong>${p.pergunta}</strong></p>
                    <button class="cta-button" onclick="responder('${p.alternativas[0]}', '${p.resposta_correta}')">${p.alternativas[0]}</button>
                    <button class="cta-button" onclick="responder('${p.alternativas[1]}', '${p.resposta_correta}')">${p.alternativas[1]}</button>
                `;
            } else {
                mostrarResultado();
            }
        }

        function responder(respostaEscolhida, respostaCorreta) {
            if (respostaEscolhida === respostaCorreta) acertos++;
            index++;
            mostrarPergunta();
        }

        function mostrarResultado() {
            document.getElementById('quiz-area').style.display = 'none';
            const resultadoSection = document.getElementById('resultado-section');
            const mensagem = document.getElementById('mensagem-resultado');
            let nivel = '';

            if (acertos <= 2) {
                nivel = 'üî∞ N√≠vel Iniciante ‚Äî Recomendamos come√ßar pelos conceitos b√°sicos.';
                document.getElementById('conceitos-basicos').style.display = 'block';
            } else if (acertos <= 4) {
                nivel = 'üìò N√≠vel Intermedi√°rio ‚Äî Refor√ßar conceitos b√°sicos e come√ßar os avan√ßados.';
                document.getElementById('conceitos-basicos').style.display = 'block';
                document.getElementById('conceitos-avancados').style.display = 'block';
            } else {
                nivel = 'üöÄ N√≠vel Avan√ßado ‚Äî Aprofunde-se nos conceitos avan√ßados!';
                document.getElementById('conceitos-avancados').style.display = 'block';
            }

            mensagem.textContent = `Voc√™ acertou ${acertos} de ${perguntas.length} perguntas. ${nivel}`;
            resultadoSection.style.display = 'block';
        }

        window.onload = carregarQuiz;
    </script>
</body>
</html>
