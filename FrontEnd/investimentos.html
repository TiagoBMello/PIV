<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LIA - Investimentos</title>
  <link rel="stylesheet" href="css/styles.css"/>
  <style>
    .investment-details {
      background-color: #ffffff;
      color: #333;
      font-size: 0.9em;
      margin-top: 10px;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
      text-align: left;
    }

    .investment-info {
      display: none;
      text-align: left;
      margin-top: 10px;
      background-color: #f9f9f9;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .question {
      margin-bottom: 20px;
      padding: 10px;
      background-color: #ffffff;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .question p {
      font-weight: bold;
    }

    button {
      background-color: #006400;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<header class="header">
  <img src="images/lia.png" alt="Logo LIA" class="logo">
  <nav class="nav">
    <button class="nav-button" onclick="window.location.href='dashboard.html'">🏠 Dashboard</button>
  </nav>
</header>

<main class="main-content">
  <h1>💸 Dicas de Investimentos</h1>
  <p>Descubra sugestões personalizadas para investir melhor.</p>

  <!-- Sessão 1: Tipos de Investimentos -->
  <section class="finance-section">
    <h2>📂 Tipos de Investimentos</h2>
    <div class="investment-cards">
      <div class="investment-card" onclick="toggleInfo('info-renda-fixa')">
        <h3>🏦 Renda Fixa</h3>
        <p>Investimentos seguros com retorno previsível.</p>
        <div id="info-renda-fixa" class="investment-info">
          <ul>
            <li>✔️ Exemplos: Tesouro Selic, CDBs, LCIs</li>
            <li>✔️ Ideal para perfis conservadores</li>
            <li>📈 Rendimento previsível, baixo risco</li>
          </ul>
        </div>
      </div>
      <div class="investment-card" onclick="toggleInfo('info-renda-variavel')">
        <h3>📈 Renda Variável</h3>
        <p>Ações, fundos e ativos de maior rentabilidade.</p>
        <div id="info-renda-variavel" class="investment-info">
          <ul>
            <li>✔️ Exemplos: Ações, FIIs, ETFs</li>
            <li>⚠️ Alta volatilidade e potencial de retorno</li>
            <li>🧠 Requer acompanhamento e análise</li>
          </ul>
        </div>
      </div>
      <div class="investment-card" onclick="toggleInfo('info-fundos')">
        <h3>🤝 Fundos de Investimento</h3>
        <p>Aplicações coletivas com gestão profissional.</p>
        <div id="info-fundos" class="investment-info">
          <ul>
            <li>✔️ Exemplos: Fundos multimercado, renda fixa, cambial</li>
            <li>📊 Diversificação com praticidade</li>
            <li>💼 Geridos por especialistas</li>
          </ul>
        </div>
      </div>
      <div class="investment-card" onclick="toggleInfo('info-cripto')">
        <h3>🪙 Criptoativos</h3>
        <p>Ativos digitais como Bitcoin e Ethereum.</p>
        <div id="info-cripto" class="investment-info">
          <ul>
            <li>✔️ Altíssimo potencial de valorização</li>
            <li>⚠️ Alta volatilidade e risco elevado</li>
            <li>🧠 Exige conhecimento e estratégia</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Sessão 2: Quiz -->
  <section class="finance-section">
    <h2>🧠 Descubra seu Perfil de Investidor</h2>
    <form id="quizForm">
      <div class="question">
        <p>1. Como você reage à queda de valor de um investimento?</p>
        <label><input type="radio" name="q1" value="1"> Vendo tudo imediatamente</label><br>
        <label><input type="radio" name="q1" value="2"> Espero um pouco e avalio</label><br>
        <label><input type="radio" name="q1" value="3"> Aproveito para comprar mais</label>
      </div>
      <div class="question">
        <p>2. Qual seu principal objetivo ao investir?</p>
        <label><input type="radio" name="q2" value="1"> Proteger meu dinheiro</label><br>
        <label><input type="radio" name="q2" value="2"> Crescer de forma equilibrada</label><br>
        <label><input type="radio" name="q2" value="3"> Multiplicar, mesmo com riscos</label>
      </div>
      <div class="question">
        <p>3. Qual o seu nível de conhecimento sobre investimentos?</p>
        <label><input type="radio" name="q3" value="1"> Iniciante</label><br>
        <label><input type="radio" name="q3" value="2"> Intermediário</label><br>
        <label><input type="radio" name="q3" value="3"> Avançado</label>
      </div>
      <div class="question">
        <p>4. Qual é o seu horizonte de investimento?</p>
        <label><input type="radio" name="q4" value="1"> Menos de 1 ano</label><br>
        <label><input type="radio" name="q4" value="2"> 1 a 3 anos</label><br>
        <label><input type="radio" name="q4" value="3"> Mais de 3 anos</label>
      </div>
      <div class="question">
        <p>5. Como está sua situação financeira atual?</p>
        <label><input type="radio" name="q5" value="1"> Preciso de liquidez</label><br>
        <label><input type="radio" name="q5" value="2"> Estável, mas com reservas</label><br>
        <label><input type="radio" name="q5" value="3"> Posso manter investimentos por anos</label>
      </div>
      <div class="question">
        <p>6. Se você ganhasse R$10.000 hoje, o que faria?</p>
        <label><input type="radio" name="q6" value="1"> Guardaria tudo no banco</label><br>
        <label><input type="radio" name="q6" value="2"> Investiria uma parte e guardaria o resto</label><br>
        <label><input type="radio" name="q6" value="3"> Investiria tudo para tentar ganhar mais</label>
      </div>
      <button type="button" onclick="calcularPerfil()">Ver meu perfil</button>
    </form>
  </section>

  <!-- Sessão 3: Dica personalizada -->
  <section id="dicaPersonalizada" class="finance-section" style="display: none;">
    <h2>🎯 Sua Dica de Investimento Personalizada</h2>
    <div id="dicaResultado" class="investment-cards"></div>
  </section>

</main>

<footer class="footer">
  <p>&copy; 2025 LIA - Assistente Financeiro. Todos os direitos reservados.</p>
</footer>

<script>
  function toggleInfo(id) {
    const element = document.getElementById(id);
    const isVisible = element.style.display === 'block';
    document.querySelectorAll('.investment-info').forEach(info => info.style.display = 'none');
    element.style.display = isVisible ? 'none' : 'block';
  }

  async function calcularPerfil() {
    const perguntas = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6'];
    let respostas = [];

    for (let i = 0; i < perguntas.length; i++) {
      const val = document.querySelector(`input[name="${perguntas[i]}"]:checked`);
      if (!val) {
        alert("Responda todas as perguntas.");
        return;
      }
      respostas.push(parseInt(val.value));
    }

    const user_id = "usuario123"; // ← pode trocar isso para pegar de login no futuro

    try {
      const response = await fetch("http://localhost:5000/perfil", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ user_id, respostas })
      });

      if (!response.ok) throw new Error("Erro na resposta da API.");

      const data = await response.json();

      // Mostrar dica personalizada
      const dicaSecao = document.getElementById("dicaPersonalizada");
      const dicaResultado = document.getElementById("dicaResultado");

      dicaSecao.style.display = "block";

      dicaResultado.innerHTML = `
        <div class="investment-card">
          <h3>${data.perfil}</h3>
          <div class="investment-details">
            <p>${data.descricao}</p>
            <ul>
              ${data.detalhes.map(item => `<li>• ${item}</li>`).join("")}
            </ul>
          </div>
        </div>
      `;

      dicaSecao.scrollIntoView({ behavior: 'smooth' });

    } catch (erro) {
      console.error("Erro ao consultar perfil:", erro);
      alert("Ocorreu um erro ao calcular seu perfil. Tente novamente.");
    }
  }
</script>


</body>
</html>
